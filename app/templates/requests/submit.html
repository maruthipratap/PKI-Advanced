{% extends "base.html" %}
{% block title %}Request Certificate â€” PKI-Advanced{% endblock %}
{% block content %}
<div style="max-width:580px; margin:0 auto">
    <div class="page-header">
        <div class="page-label">// certificate request</div>
        <h1 class="page-title">Request a Certificate</h1>
        <p class="page-sub">Your request will be reviewed and approved by a CA Administrator</p>
    </div>

    <div class="card">
        <!-- Workflow indicator -->
        <div style="display:flex; align-items:center; gap:0; margin-bottom:2rem; font-size:0.75rem">
            <div style="text-align:center; flex:1">
                <div style="width:32px; height:32px; border-radius:50%; background:var(--accent); color:#000; display:flex; align-items:center; justify-content:center; font-weight:800; margin:0 auto 0.4rem">1</div>
                <div style="color:var(--accent)">Submit</div>
            </div>
            <div style="flex:1; height:2px; background:var(--border)"></div>
            <div style="text-align:center; flex:1">
                <div style="width:32px; height:32px; border-radius:50%; background:var(--border); color:var(--muted); display:flex; align-items:center; justify-content:center; font-weight:800; margin:0 auto 0.4rem">2</div>
                <div class="text-muted">CA Review</div>
            </div>
            <div style="flex:1; height:2px; background:var(--border)"></div>
            <div style="text-align:center; flex:1">
                <div style="width:32px; height:32px; border-radius:50%; background:var(--border); color:var(--muted); display:flex; align-items:center; justify-content:center; font-weight:800; margin:0 auto 0.4rem">3</div>
                <div class="text-muted">Issued</div>
            </div>
        </div>

        <form method="POST" action="/request">
            <div class="form-group">
                <label>Certificate Owner Name (CN) *</label>
                <input type="text" name="owner_name" placeholder="e.g. John Doe" required
                    value="{{ current_user.username }}">
            </div>
            <div class="form-group">
                <label>Email Address (SAN)</label>
                <input type="email" name="email" placeholder="e.g. john@example.com"
                    value="{{ current_user.email }}">
            </div>
            <div class="form-group">
                <label>Organization</label>
                <input type="text" name="organization" placeholder="e.g. Acme Corp">
            </div>
            <div class="form-group">
                <label>Purpose / Reason</label>
                <textarea name="purpose" placeholder="Describe why you need this certificate..." rows="3" style="resize:vertical"></textarea>
            </div>
            <button type="submit" class="btn btn-primary" style="width:100%; justify-content:center">
                ðŸ“¨ Submit Request
            </button>
        </form>
    </div>
</div>
{% endblock %}